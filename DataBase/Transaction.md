# 트랜잭션

`2023-07-15`

**트랜잭션**(Transaction)은 `쪼갤 수 없는 업무 처리의 최소 단위`를 말한다.

> 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 수행되어야 할 일련의 연산. - `코딩팩토리`

---

<br>

# 트랜잭션의 특징

1 트랜잭션은 데이터베이스 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위이다.

2 사용자가 시스템에 대한 서비스 요구 시 시스테이 응답하기 위한 상태 변환 과정의 작업 단위이다.

3 하나의 트랜잭션은 Commit되거나 Rollback된다.
<br>

> -`코딩팩토리`

---

<br>

# 트랜잭션의 성질

## 원자성(Atomicity)

- 트랜잭션은 원자적인 단위로 간주된다.
- 트랜잭션 내의 모든 작업은 전부 `성공`하거나 전부 `실패`해야한다.
  > 한 작업이라도 실패하면 트랜잭션 전체가 `롤백`되어 이전 상태로 복구된다. <br> 모든 작업이 성공하면 트랜잭션은 `커밋`되어 영구적으로 적용된다.

## 일관성(Consistency)

- 트랜잭션이 실행되기 전과 후에 데이터베이스의 일관성을 유지해야한다.
- 트랜잭션의 작업이 데이터베이스의 미리 정의된 규칙과 제약 조건을 준수해야 한다.
- 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.
  > 일관성은 데이터베이스의 `무결성`을 보장하는 중요한 특징이다.

## 독립성,격리성(Isolation)

- 둘 이상의 트랜잭션이 동시에 병행 실해되는 경우, 각 트랜잭션은 다른 트랜잭션으로부터 독립되어야 한다.
- 한 트랜잭션의 작업이 다른 트랜잭션에 영향을 주지 않고 독립적으로 실행되어야 한다.
- 수행중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.
  > 독립성은 동시성 제어를 통해 보장된다.

## 지속성(Durability)

- 트랜잭션이 커밋되면 그 결과는 영구적으로 저장되어야한다.
- 시스탬 장애나 전원 장애 등이 발생해도 트랜잭션의 결과는 손실되지 않고 복구될 수 있어야 한다.

---

<br>

# 트랜잭션의 연산

## 커밋(Commit)연산

- 트랜잭션의 작업을 영구적으로 적용하는 연산이다.
- 트랜잭션이 모든 작업을 성공적으로 수행한 후, 커밋 연산을 실행함으로 트랜잭션의 결과를 데이터베이스에 반영한다.
  > 커밋은 트랜잭션의 원자성과 지속성을 보장하는 역할을 가진다.

## 롤백(Rollback)연산

- 트랜잭션을 이전 상태로 복구하는 연산이다.
- 트랜잭션 중 하나의 작업이 실패하거나 오류가 발생한 경우, 롤백 연산을 실행함으로 트랜잭션의 모든 작업을 취소하고 이전 상태로 되돌린다.
  > 롤백은 트랜잭션의 원자성을 보장하고, 예외가 발생했을 때 데이터의 무결성을 유지할 수 있도록 도와준다.

---

<br>

# 트랜잭션의 상태

![트랜잭션상태](./img/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%981.png) <br> 출처 : https://rebro.kr/162

- Active : 트랜잭션이 실행중인 상태.
- Failed : 트랜잭션 실행에 오류가 발생하여 중단된 상태.
- Aborted : 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태.
- Partially Committed : 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전인 상태.
- Committed : 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태.
